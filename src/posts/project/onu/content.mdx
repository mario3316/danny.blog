---
title: OnU
description: 본인의 영양제 섭취 목적에 맞는 올바른 영양제를 선택하고, 꾸준한 복용으로 이어질 수 있도록 도와주는 서비스
startDate: 2023-04-10
endDate: 2023-05-19
techstacks: React.js, Next.js, TypeScript, Zustand, React-query, Tailwindcss, Styled-components, Material UI, Figma
url: https://github.com/swhana/onu
thumbnail: /project/onu/onu_thumbnail.gif
imgPath: /project/onu/imgs
---

### Axios interceptor를 활용한 토큰 인증 인스턴스 구현
    - JWT토큰을 이용한 회원인증 모델 구현
    - request interceptor에서는 헤더에 token을 넣어주도록 하였음
    - response interceptor에서는 401 status code(Unauthorized)가 올 경우, 토큰이 만료된 것으로 판단하고 리프레시 토큰으로 토큰 재발급 요청을 보내도록 함. 성공 시 새로 발급한 토큰을 기반으로 재요청
        
        
### API 요청 메소드 모듈화
    - API 명세서를 기반으로 작성
    - API 함수를 사용할 때 매번 API 명세서를 찾아보며 url, method 등을 입력할 필요 없이 `api.(함수명)` 으로 API 요청할 수 있도록 추상화
    - token 인증이 필요한 API의 경우 authAPI 인스턴스를, 아닌 경우 baseAPI 인스턴스를 통해 axios 요청을 함으로써 API를 사용하는 입장에서는 토큰 인증 유무에 대해 신경 쓰지 않도록 하였음
 
### 영양제 비교 선택 기능    
    - 제품 비교하기 선택 시 화면 하단의 서랍이 올라오도록 구현
    - 선택한 제품은 store에 전역 상태로 저장하고, 상태를 구독해서 최신 상태를 계속 유지할 수 있도록 함
    - 2개 제품을 선택했을 경우 더 이상 비교하기를 눌러도 제품 내용이 바뀌지 않음
    - 선택한 제품은 강조 표시
    
### 검색 기능  
    - 검색바 애니메이션 구현

### 영양제 복용 알림 기능   
    - 복용 알림 받고싶은 시간 설정 기능
    - 복용했다면 달력에서 복용여부 체크
    - 달력에서 복용했던 날짜 / 연속 복용일자 확인
    - 휴대폰 인증이 된 사용자만 가능 / 인증 안됐으면 인증 페이지로 이동

### 닉네임 중복검사 기능   
    - 오늘의 집 회원정보 수정을 하다가 좋아보여서 직접 만들어보기로 함
    - 닉네임을 입력받을때 중복검사 API를 실시간으로 요청
    - 중복일 시 랜덤으로 생성한 숫자를 붙여서 닉네임 추천
    
### 휴대폰 인증 기능
    - 인증번호가 문자메시지로 발송 → 인증번호 확인절차
    - 실패시 처음으로 돌아감, 재전송 가능(최대 2회)
    
### 복용/관심 영양제 등록 기능
    
### 반응형 웹 디자인 구현



## 기술스택 도입이유 & 개발과정

- 컴파일 이전에 미리 오류를 줄이고, 일관성 있는 코드를 작성하고자 `TypeScript` 를 도입하였습니다.
- `Redux`보다 보일러 플레이트 코드가 적고 최소한의 코드로 전역 상태를 관리하기 위해 `Zustand`를 도입하였으며, 서버 데이터를 분리해서 관리하기 위해 `React-query` 를 도입하였습니다.
- React 개발에 있어 다양한 기능을 지원하는 `Next.js` 프레임워크를 도입하여 개발의 효율성을 높였습니다.
    - 일반적으로 SEO와 SSR을 위해 도입을 고민하는 경우가 일반적이지만 SSR을 제대로 활용하지 못하였고 SEO는 내부 프로젝트 특성상 따로 고려하지는 않았습니다.
    - 다량의 영양제 사진을 불러와야하는 이번 프로젝트의 특성상 이미지 최적화만으로도 충분히 성능개선의 효과를 보았고 도입할만한 이유가 충분했다고 생각합니다.
- 모바일 웹 디자인으로 구현하였습니다.
- Axios의 인터셉터, 인스턴스를 사용한 모듈화, 컴포넌트 단위 개발을 진행했고, 보다 가독성 좋은 코드를 작성하고자 하였습니다.



## 문제 해결

### 새로고침 하면 로그인이 풀리는 문제를 개선하고자 함
    - 최상위 컴포넌트(_app.tsx)에서 유저 로그인 상태를 체크하고 로그인이 안 되어있을 경우 로컬스토리지에서 유저 데이터를 업데이트
### 제품을 검색할 때 좀더 매끄러운 경험을 제공하고자 함
    - 프로젝트 기획시 참고했던 실제 웹서비스의 경우, 검색바를 눌렀을 때 그 자리에서 검색되는 것이 아닌 따로 검색 페이지로 이동하고, 그 자리에서 검색하는 절차를 거쳤음
    - 화면이 새로고침되는 모습이 보였고, 검색 페이지가 새로 열리는 것은 사용자 경험을 해친다고 판단함
    - 어디서든 제품 검색을 할 수 있도록 검색 바를 헤더 상단에 고정시켰고, Next.js의 페이지 라우팅을 통해 화면이 깜빡이는 현상을 없앴음
    - 다량의 이미지가 로딩되는 서비스에서, Next.js에서 제공하는 이미지 최적화 기술을 통해 검색결과가 로딩되는 시간을 줄였음
    
### 약 1500개 가량의 제품 이미지를 띄워야하는 문제
    - 처음에는 한 페이지에서 다 불러와서 띄우려다 보니 로딩시간이 너무 길었다
    - SSR로 해결할 수 있는것인가 했는데 어찌됐든 1000개가 넘는 데이터를 불러와서 로딩을 끝내고 띄우냐(SSR) 로딩하면서 띄우냐(CSR)의 차이여서 성능적인 개선이 될 것이라고 생각하지는 않았다. 물론 SSR을 제대로 못 사용한 것도 맞다.
    - 카테고리별(기능별, 증상별)로 데이터를 나눠서 로딩하는 데이터의 숫자를 줄이는 것으로 성능을 개선하고자 했다
    - Next.js의 Image 모듈을 사용함으로써 이미지 최적화를 진행했다
    - 로딩 스피너를 넣음으로써 사용자 입장에서 이미지가 로딩중일 때 부자연스러운 경험을 최대한 줄였다
    - 아쉬운점 → 카테고리별로 데이터를 띄울때 react-query의 prefetching 기능을 썼더라면 어땠을까 하는 생각이 들기도 한다



## 협업 관리

- [이슈 관리 / JIRA](https://ssafy.atlassian.net/jira/software/c/projects/S08P31A703/boards/1880?quickFilter=5765)
- [협업 문서 / Notion](https://www.notion.so/529626e157f54a20ba31e51e941e686d?pvs=21)
- [UI/UX 디자인 / Figma](https://www.figma.com/file/BxdV1dLGmP6Vj4AXDauJBO/A703?type=design&node-id=0-1)
